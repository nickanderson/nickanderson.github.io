<!DOCTYPE html>
<html>

    <head>
        <title> The -top- mustache extension in CFEngine 3 &middot;  </title>

        <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.55.6" />


<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


<link rel="stylesheet" href="https://cmdln.org/css/nix.css">
<link rel="stylesheet" href="https://cmdln.org/css/syntax.css">


<link href="https://fonts.googleapis.com/css?family=Inconsolata|Open+Sans|Roboto|Montserrat|Concert+One" rel="stylesheet">




    </head>

    <body>
        <header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://cmdln.org>nick@cmdln.org ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://cmdln.org">/home/nick</a>
				</li>
				
				
				<li >
					<a href="/post/">~/posts</a>
				</li>
				

			</ul>
		</div>
	</div>
</nav>
</header>

        <div class="container wrapper">
            <h1><a href="https://cmdln.org/2018/11/16/the-top-mustache-extension-in-cfengine-3/">The -top- mustache extension in CFEngine 3</a></h1>
            <span class="post-date">Nov 16, 2018 </span>
            <div class="post-content">
                <blockquote>
<p>
  What is the <code>-top-</code> extension, and how do I use it in CFEngines Mustache templating method?
</p>
</blockquote>

<p>The <code>-top-</code> extension to the mustache template method, first introduced in
CFEngine 3.9.0, is a special key representing the complete data given to the
templating engine. This is useful for iterating over the top level of a
container <code>{{#-top-}}</code> ... <code>{{/-top-}}</code> and rendering json representation of
data given with <code>$</code> and <code>%</code>. Note, when iterating over <code>-top-</code> you can expand
the current iterations key with <code>@</code> and value with <code>.</code>.</p>

<p>Let's take a look at a couple small examples:</p>

<h1 id="iterating-over-top-for-rendering-simple-key-value-configuration-files">Iterating over -top- for rendering simple key=value configuration files</h1>

<p>Many configuration file formats like <code>/etc/sysctl.conf</code> are simple key = value.</p>

<p>In this example, we see how data for <code>/etc/sysctl.conf</code> can be modeled for simple
rendering using <code>-top-</code>.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3">  <span class="k">bundle</span> <span class="k">agent</span> <span class="nf">main</span>
  <span class="p">{</span>
    <span class="kd">vars</span><span class="p">:</span>

        <span class="c"># A simple data structure holding sysctl keys and values
</span><span class="c"></span>        <span class="s">&#34;c&#34;</span> <span class="kr">data</span> <span class="o">=&gt;</span> <span class="err">&#39;</span><span class="p">{</span>
    <span class="s">&#34;net.ipv6.conf.forwarding&#34;</span><span class="err">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span>
    <span class="s">&#34;net.ipv6.conf.all.forwarding&#34;</span><span class="err">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span>
    <span class="s">&#34;fs.protected_hardlinks&#34;</span><span class="err">:</span> <span class="s">&#34;1&#34;</span><span class="p">,</span>
    <span class="s">&#34;fs.protected_symlinks&#34;</span><span class="err">:</span> <span class="s">&#34;1&#34;</span><span class="p">,</span>
    <span class="s">&#34;vm.swappiness&#34;</span><span class="err">:</span> <span class="s">&#34;10&#34;</span>
  <span class="p">}</span><span class="err">&#39;</span><span class="p">;</span>

    <span class="kd">reports</span><span class="p">:</span>
        <span class="s">&#34;CFEngine </span><span class="si">$(sys.cf_version)</span><span class="s">&#34;</span><span class="p">;</span>

        <span class="c"># A report to see what a rendered file would look like
</span><span class="c"></span>        <span class="s">&#34;/etc/sysctl.conf</span><span class="si">$(const.n)$(with)</span><span class="s">&#34;</span>
          <span class="kr">with</span> <span class="o">=&gt;</span> <span class="nf">string_mustache</span><span class="p">(</span> <span class="s">&#34;# Rendered by CFEngine</span><span class="si">$(const.n)</span><span class="s">{{#-top-}}{{{@}}}={{{.}}}</span><span class="si">$(const.n)</span><span class="s">{{/-top-}}&#34;</span><span class="p">,</span>
                                   <span class="nf">c</span><span class="p">);</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
Let's break it down:
<li>On line 6-12 we define <code>c</code> as data container with inline JSON. Note, there are</li>
  many alternative ways that data can be defined, see <a href="https://docs.cfengine.com/docs/3.12/reference-functions-readjson.html" title="readjson()">readjson()</a>, <a href="https://docs.cfengine.com/docs/3.12/reference-functions-readyaml.html" title="readyaml()">readyaml()</a>,
  <a href="https://docs.cfengine.com/docs/3.12/reference-functions-readenvfile.html" title="readenvfile()">readenvfile()</a>, <a href="https://docs.cfengine.com/docs/3.12/reference-functions-readdata.html" title="readdata()">readdata()</a>.
<li>On line 18 we promise to report the name of our example file (</li>
  <code>/etc/sysctl.conf</code> )followed by a newline ( <a href="https://docs.cfengine.com/docs/3.12/reference-special-variables-const.html#const-n" title="$(const.n)">$(const.n)</a> ), followed by a
  string which is rendered from a mustache template via the <a href="https://docs.cfengine.com/docs/3.12/reference-functions-string_mustache.html" title="string_mustache()">string_mustache()</a>
  function.
</ul>

<p>The above policy results in this output:</p>
<pre class="example">
R: CFEngine 3.12.0
R: /etc/sysctl.conf
# Rendered by CFEngine
net.ipv6.conf.forwarding=0
net.ipv6.conf.all.forwarding=0
fs.protected_hardlinks=1
fs.protected_symlinks=1
vm.swappiness=10

</pre>

<p>It's easy to take this reports prototype and turn it into a real files promise.
Let's take this example one step further and make it a bit more practical.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3">  <span class="k">bundle</span> <span class="k">agent</span> <span class="nf">main</span>
  <span class="p">{</span>
    <span class="kd">vars</span><span class="p">:</span>

        <span class="c"># Let&#39;s make it easy for this policy to be applied to a temporary
</span><span class="c"></span>        <span class="c"># location. Note, an empty string will result in no prefix. This is a
</span><span class="c"></span>        <span class="c"># useful pattern when combined with classes.
</span><span class="c"></span>
        <span class="p">&#34;</span><span class="nv">PREFIX</span><span class="p">&#34;</span> <span class="kt">string</span> <span class="o">=&gt;</span> <span class="s">&#34;/tmp&#34;</span><span class="p">;</span>

        <span class="c"># A simple data structure holding sysctl keys and values
</span><span class="c"></span>        <span class="s">&#34;c&#34;</span> <span class="kr">data</span> <span class="o">=&gt;</span> <span class="err">&#39;</span><span class="p">{</span>
    <span class="s">&#34;net.ipv6.conf.forwarding&#34;</span><span class="err">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span>
    <span class="s">&#34;net.ipv6.conf.all.forwarding&#34;</span><span class="err">:</span> <span class="s">&#34;0&#34;</span><span class="p">,</span>
    <span class="s">&#34;fs.protected_hardlinks&#34;</span><span class="err">:</span> <span class="s">&#34;1&#34;</span><span class="p">,</span>
    <span class="s">&#34;fs.protected_symlinks&#34;</span><span class="err">:</span> <span class="s">&#34;1&#34;</span><span class="p">,</span>
    <span class="s">&#34;vm.swappiness&#34;</span><span class="err">:</span> <span class="s">&#34;10&#34;</span>
  <span class="p">}</span><span class="err">&#39;</span><span class="p">;</span>

    <span class="kd">files</span><span class="p">:</span>
        <span class="s">&#34;</span><span class="si">$(PREFIX)</span><span class="s">/etc/sysctl.conf&#34;</span>
          <span class="kr">create</span> <span class="o">=&gt;</span> <span class="s">&#34;true&#34;</span><span class="p">,</span>
          <span class="kr">template_method</span> <span class="o">=&gt;</span> <span class="s">&#34;inline_mustache&#34;</span><span class="p">,</span>
          <span class="kr">edit_template_string</span> <span class="o">=&gt;</span> <span class="s">&#34;# Rendered by CFEngine</span><span class="si">$(const.n)</span><span class="s">{{#-top-}}{{{@}}}={{{.}}}</span><span class="si">$(const.n)</span><span class="s">{{/-top-}}&#34;</span><span class="p">,</span>
          <span class="kr">template_data</span> <span class="o">=&gt;</span> <span class="nv">@(c)</span><span class="p">;</span>


    <span class="kd">reports</span><span class="p">:</span>
        <span class="s">&#34;CFEngine </span><span class="si">$(sys.cf_version)</span><span class="s">&#34;</span><span class="p">;</span>

        <span class="c"># A report to see what a rendered file would look like
</span><span class="c"></span>        <span class="s">&#34;</span><span class="si">${PREFIX}</span><span class="s">/etc/sysctl.conf&#34;</span>
          <span class="kr">printfile</span> <span class="o">=&gt;</span> <span class="nf">cat</span><span class="p">(</span> <span class="err">$</span><span class="p">(</span><span class="nf">this</span><span class="err">.</span><span class="nf">promiser</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>Here is the policy output:</p>
<pre class="example">
R: CFEngine 3.12.0
R: /tmp/etc/sysctl.conf
R: # Rendered by CFEngine
R: net.ipv6.conf.forwarding=0
R: net.ipv6.conf.all.forwarding=0
R: fs.protected_hardlinks=1
R: fs.protected_symlinks=1
R: vm.swappiness=10
</pre>

<h1 id="rendering-data-for-direct-use-and-debugging">Rendering data for direct use and debugging</h1>

<p>The <code>-top-</code> extension, combined with <code>$</code> or <code>%</code> is able to render data provided
to the template as JSON. This is useful in preparing requests for REST APIs and
general debugging in cases where you are unsure of the exact data provided.</p>

<p>For example, if data is not explicitly provided to a template via <a href="https://docs.cfengine.com/docs/3.12/reference-promise-types-files.html#template_data" title="template_data">template_data</a>,
<a href="https://docs.cfengine.com/docs/3.12/reference-functions-datastate.html" title="datastate()">datastate()</a> is used. Let's take a look at a small example where we render a
couple of data structures.</p>

<p>This example shows rendering JSON data for use in communication with a REST API.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3">  <span class="k">bundle</span> <span class="k">agent</span> <span class="nf">main</span>
  <span class="p">{</span>

    <span class="kd">vars</span><span class="p">:</span>

        <span class="s">&#34;request&#34;</span>
          <span class="kr">data</span> <span class="o">=&gt;</span> <span class="err">&#39;</span><span class="p">{</span> <span class="s">&#34;name&#34;</span><span class="err">:</span> <span class="s">&#34;morpheus&#34;</span><span class="p">,</span> <span class="s">&#34;job&#34;</span><span class="err">:</span> <span class="s">&#34;leader&#34;</span> <span class="p">}</span><span class="err">&#39;</span><span class="p">;</span>

        <span class="p">&#34;</span><span class="nv">response</span><span class="p">&#34;</span>
          <span class="kt">string</span> <span class="o">=&gt;</span> <span class="nf">execresult</span><span class="p">(</span> <span class="err">&#39;</span><span class="nf">curl</span> <span class="err">-</span><span class="nf">s</span> <span class="err">-</span><span class="nf">X</span> <span class="nf">POST</span> <span class="kd">https</span><span class="p">:</span><span class="err">//</span><span class="nf">reqres</span><span class="err">.</span><span class="nf">in</span><span class="err">/</span><span class="nf">api</span><span class="err">/</span><span class="nf">users</span> <span class="err">-</span><span class="nf">d</span> <span class="err">@/</span><span class="nf">tmp</span><span class="err">/</span><span class="nf">request</span><span class="err">.</span><span class="nf">json</span> <span class="err">-</span><span class="nf">H</span> <span class="s">&#34;Content-Type: application/json&#34;</span><span class="err">&#39;</span><span class="p">,</span> <span class="nf">useshell</span><span class="p">),</span>
          <span class="kr">depends_on</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s">&#34;request_ready&#34;</span> <span class="p">};</span>

    <span class="kd">files</span><span class="p">:</span>
        <span class="s">&#34;/tmp/request.json&#34;</span>
          <span class="kr">handle</span> <span class="o">=&gt;</span> <span class="s">&#34;request_ready&#34;</span><span class="p">,</span>
          <span class="kr">create</span> <span class="o">=&gt;</span> <span class="s">&#34;true&#34;</span><span class="p">,</span>
          <span class="kr">template_method</span> <span class="o">=&gt;</span> <span class="s">&#34;inline_mustache&#34;</span><span class="p">,</span>
          <span class="kr">edit_template_string</span> <span class="o">=&gt;</span> <span class="s">&#34;{{$-top-}}&#34;</span><span class="p">,</span>
          <span class="kr">template_data</span> <span class="o">=&gt;</span> <span class="nv">@(request)</span><span class="p">;</span>

    <span class="kd">reports</span><span class="p">:</span>
        <span class="s">&#34;CFEngine </span><span class="si">$(sys.cf_version)</span><span class="s">&#34;</span><span class="p">;</span>

        <span class="s">&#34;Posted Request&#34;</span>
          <span class="kr">printfile</span> <span class="o">=&gt;</span> <span class="nf">cat</span><span class="p">(</span> <span class="s">&#34;/tmp/request.json&#34;</span> <span class="p">);</span>

        <span class="s">&#34;Response</span><span class="si">$(const.n)$(response)</span><span class="s">&#34;</span>
          <span class="kr">if</span> <span class="o">=&gt;</span> <span class="nf">isvariable</span><span class="p">(</span> <span class="nf">response</span> <span class="p">);</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>We use the freely available https://reqres.in/ to show a simple way to interact
with an API.</p>

<ul>
In the above example:
<li>On line 6 we define the request data describing the user we want to create.</li>
<li>On line 9 we capture the API response into a variable, alternatively we could</li>
  use a <em>commands</em> promise, redirecting the output to a file.
<li>On lines 13-19 we define a <em>files</em> promise to render our request to disk. This</li>
  file is used by the curl command to provide the request data for the Reqres
  API.
<li>On lines 24-25 we use a <em>reports</em> promise to show the rendered request. Note how</li>
  <code>{{$-top}}</code> rendered a serial representation.
</ul>

<p>And here is the policy output:</p>
<pre class="example">
R: CFEngine 3.12.0
R: Posted Request
R: {"job":"leader","name":"morpheus"}
R: Response
{"job":"leader","name":"morpheus","id":"771","createdAt":"2018-11-16T15:47:56.473Z"}
</pre>

<p>Many times it's useful to inspect a data structure and the <code>%</code> renders
multi-line JSON to make it easier to read. In this example, we find all the
variables in the paths bundle and merge them together into a single data
structure.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-cfengine3" data-lang="cfengine3">  <span class="k">bundle</span> <span class="k">agent</span> <span class="nf">main</span>
  <span class="p">{</span>

    <span class="kd">vars</span><span class="p">:</span>

        <span class="s">&#34;paths&#34;</span> <span class="kr">data</span> <span class="o">=&gt;</span> <span class="nf">variablesmatching_as_data</span><span class="p">(</span> <span class="s">&#34;default:paths</span><span class="se">\.</span><span class="s">.*&#34;</span><span class="p">);</span>

    <span class="kd">reports</span><span class="p">:</span>
        <span class="s">&#34;CFEngine </span><span class="si">$(sys.cf_version)</span><span class="s">&#34;</span><span class="p">;</span>

        <span class="s">&#34;Variable data from bundle paths</span><span class="si">$(const.n)$(with)</span><span class="s">&#34;</span>
          <span class="c"># WARNING the escaped % is an artifacct of hugo, remove the backslash!
</span><span class="c"></span>          <span class="kr">with</span> <span class="o">=&gt;</span> <span class="nf">string_mustache</span><span class="p">(</span> <span class="s">&#34;{{</span><span class="se">\%</span><span class="s">-top-}}&#34;</span><span class="p">,</span> <span class="nf">paths</span> <span class="p">);</span>
  <span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
In the above policy:
<li>On line 6 we define a new data container <em>paths</em> as the merged result of all</li>
  variables in the <code>paths</code> bundle.
<li>On lines 11-12 we show the multi-line JSON representation of that merged result.</li>
</ul>

<p>Here is the policy output:</p>

<pre><code>R: CFEngine 3.12.0
R: Variable data from bundle paths
{
  &quot;default:paths.all_paths&quot;: [
    &quot;groupadd&quot;,
    &quot;usermod&quot;,
    &quot;iptables_save&quot;,
    &quot;ifconfig&quot;,
    &quot;groupdel&quot;,
    &quot;dmidecode&quot;,
    &quot;egrep&quot;,
    &quot;getfacl&quot;,
    &quot;createrepo&quot;,
    &quot;mailx&quot;,
    &quot;logger&quot;,
    &quot;ethtool&quot;,
    &quot;service&quot;,
    &quot;free&quot;,
    &quot;diff&quot;,
    &quot;curl&quot;,
    &quot;netstat&quot;,
    &quot;virtualenv&quot;,
    &quot;apt_config&quot;,
    &quot;cat&quot;,
    &quot;sysctl&quot;,
    &quot;tr&quot;,
    &quot;hostname&quot;,
    &quot;bc&quot;,
    &quot;dc&quot;,
    &quot;svc&quot;,
    &quot;dpkg_divert&quot;,
    &quot;apt_get&quot;,
    &quot;echo&quot;,
    &quot;crontab&quot;,
    &quot;nologin&quot;,
    &quot;test&quot;,
    &quot;npm&quot;,
    &quot;cksum&quot;,
    &quot;ip&quot;,
    &quot;userdel&quot;,
    &quot;awk&quot;,
    &quot;ping&quot;,
    &quot;groupmod&quot;,
    &quot;dpkg&quot;,
    &quot;lsof&quot;,
    &quot;env&quot;,
    &quot;dig&quot;,
    &quot;perl&quot;,
    &quot;cut&quot;,
    &quot;domainname&quot;,
    &quot;apt_cache&quot;,
    &quot;wc&quot;,
    &quot;tar&quot;,
    &quot;pgrep&quot;,
    &quot;update_alternatives&quot;,
    &quot;aptitude&quot;,
    &quot;useradd&quot;,
    &quot;apt_key&quot;,
    &quot;pip&quot;,
    &quot;update_rc_d&quot;,
    &quot;find&quot;,
    &quot;init&quot;,
    &quot;df&quot;,
    &quot;grep&quot;,
    &quot;printf&quot;,
    &quot;realpath&quot;,
    &quot;sort&quot;,
    &quot;shadow&quot;,
    &quot;systemctl&quot;,
    &quot;chkconfig&quot;,
    &quot;ls&quot;,
    &quot;crontabs&quot;,
    &quot;lsattr&quot;,
    &quot;wget&quot;,
    &quot;getent&quot;,
    &quot;sed&quot;,
    &quot;iptables&quot;,
    &quot;git&quot;
  ],
  &quot;default:paths.apt_cache&quot;: &quot;/usr/bin/apt-cache&quot;,
  &quot;default:paths.apt_config&quot;: &quot;/usr/bin/apt-config&quot;,
  &quot;default:paths.apt_get&quot;: &quot;/usr/bin/apt-get&quot;,
  &quot;default:paths.apt_key&quot;: &quot;/usr/bin/apt-key&quot;,
  &quot;default:paths.aptitude&quot;: &quot;/usr/bin/aptitude&quot;,
  &quot;default:paths.awk&quot;: &quot;/usr/bin/awk&quot;,
  &quot;default:paths.bc&quot;: &quot;/usr/bin/bc&quot;,
  &quot;default:paths.cat&quot;: &quot;/bin/cat&quot;,
  &quot;default:paths.chkconfig&quot;: &quot;/sbin/chkconfig&quot;,
  &quot;default:paths.cksum&quot;: &quot;/usr/bin/cksum&quot;,
  &quot;default:paths.createrepo&quot;: &quot;/usr/bin/createrepo&quot;,
  &quot;default:paths.crontab&quot;: &quot;/usr/bin/crontab&quot;,
  &quot;default:paths.crontabs&quot;: &quot;/var/spool/cron/crontabs&quot;,
  &quot;default:paths.curl&quot;: &quot;/usr/bin/curl&quot;,
  &quot;default:paths.cut&quot;: &quot;/usr/bin/cut&quot;,
  &quot;default:paths.dc&quot;: &quot;/usr/bin/dc&quot;,
  &quot;default:paths.df&quot;: &quot;/bin/df&quot;,
  &quot;default:paths.diff&quot;: &quot;/usr/bin/diff&quot;,
  &quot;default:paths.dig&quot;: &quot;/usr/bin/dig&quot;,
  &quot;default:paths.dmidecode&quot;: &quot;/usr/sbin/dmidecode&quot;,
  &quot;default:paths.domainname&quot;: &quot;/bin/domainname&quot;,
  &quot;default:paths.dpkg&quot;: &quot;/usr/bin/dpkg&quot;,
  &quot;default:paths.dpkg_divert&quot;: &quot;/usr/bin/dpkg-divert&quot;,
  &quot;default:paths.echo&quot;: &quot;/bin/echo&quot;,
  &quot;default:paths.egrep&quot;: &quot;/bin/egrep&quot;,
  &quot;default:paths.env&quot;: &quot;/usr/bin/env&quot;,
  &quot;default:paths.ethtool&quot;: &quot;/sbin/ethtool&quot;,
  &quot;default:paths.find&quot;: &quot;/usr/bin/find&quot;,
  &quot;default:paths.free&quot;: &quot;/usr/bin/free&quot;,
  &quot;default:paths.getent&quot;: &quot;/usr/bin/getent&quot;,
  &quot;default:paths.getfacl&quot;: &quot;/usr/bin/getfacl&quot;,
  &quot;default:paths.git&quot;: &quot;/usr/bin/git&quot;,
  &quot;default:paths.grep&quot;: &quot;/bin/grep&quot;,
  &quot;default:paths.groupadd&quot;: &quot;/usr/sbin/groupadd&quot;,
  &quot;default:paths.groupdel&quot;: &quot;/usr/sbin/groupdel&quot;,
  &quot;default:paths.groupmod&quot;: &quot;/usr/sbin/groupmod&quot;,
  &quot;default:paths.hostname&quot;: &quot;/bin/hostname&quot;,
  &quot;default:paths.ifconfig&quot;: &quot;/sbin/ifconfig&quot;,
  &quot;default:paths.init&quot;: &quot;/sbin/init&quot;,
  &quot;default:paths.ip&quot;: &quot;/sbin/ip&quot;,
  &quot;default:paths.iptables&quot;: &quot;/sbin/iptables&quot;,
  &quot;default:paths.iptables_save&quot;: &quot;/sbin/iptables-save&quot;,
  &quot;default:paths.logger&quot;: &quot;/usr/bin/logger&quot;,
  &quot;default:paths.ls&quot;: &quot;/bin/ls&quot;,
  &quot;default:paths.lsattr&quot;: &quot;/usr/bin/lsattr&quot;,
  &quot;default:paths.lsof&quot;: &quot;/usr/bin/lsof&quot;,
  &quot;default:paths.mailx&quot;: &quot;/usr/bin/mailx&quot;,
  &quot;default:paths.netstat&quot;: &quot;/bin/netstat&quot;,
  &quot;default:paths.nologin&quot;: &quot;/usr/sbin/nologin&quot;,
  &quot;default:paths.npm&quot;: &quot;/usr/bin/npm&quot;,
  &quot;default:paths.path[apt_cache]&quot;: &quot;/usr/bin/apt-cache&quot;,
  &quot;default:paths.path[apt_config]&quot;: &quot;/usr/bin/apt-config&quot;,
  &quot;default:paths.path[apt_get]&quot;: &quot;/usr/bin/apt-get&quot;,
  &quot;default:paths.path[apt_key]&quot;: &quot;/usr/bin/apt-key&quot;,
  &quot;default:paths.path[aptitude]&quot;: &quot;/usr/bin/aptitude&quot;,
  &quot;default:paths.path[awk]&quot;: &quot;/usr/bin/awk&quot;,
  &quot;default:paths.path[bc]&quot;: &quot;/usr/bin/bc&quot;,
  &quot;default:paths.path[cat]&quot;: &quot;/bin/cat&quot;,
  &quot;default:paths.path[chkconfig]&quot;: &quot;/sbin/chkconfig&quot;,
  &quot;default:paths.path[cksum]&quot;: &quot;/usr/bin/cksum&quot;,
  &quot;default:paths.path[createrepo]&quot;: &quot;/usr/bin/createrepo&quot;,
  &quot;default:paths.path[crontab]&quot;: &quot;/usr/bin/crontab&quot;,
  &quot;default:paths.path[crontabs]&quot;: &quot;/var/spool/cron/crontabs&quot;,
  &quot;default:paths.path[curl]&quot;: &quot;/usr/bin/curl&quot;,
  &quot;default:paths.path[cut]&quot;: &quot;/usr/bin/cut&quot;,
  &quot;default:paths.path[dc]&quot;: &quot;/usr/bin/dc&quot;,
  &quot;default:paths.path[df]&quot;: &quot;/bin/df&quot;,
  &quot;default:paths.path[diff]&quot;: &quot;/usr/bin/diff&quot;,
  &quot;default:paths.path[dig]&quot;: &quot;/usr/bin/dig&quot;,
  &quot;default:paths.path[dmidecode]&quot;: &quot;/usr/sbin/dmidecode&quot;,
  &quot;default:paths.path[domainname]&quot;: &quot;/bin/domainname&quot;,
  &quot;default:paths.path[dpkg]&quot;: &quot;/usr/bin/dpkg&quot;,
  &quot;default:paths.path[dpkg_divert]&quot;: &quot;/usr/bin/dpkg-divert&quot;,
  &quot;default:paths.path[echo]&quot;: &quot;/bin/echo&quot;,
  &quot;default:paths.path[egrep]&quot;: &quot;/bin/egrep&quot;,
  &quot;default:paths.path[env]&quot;: &quot;/usr/bin/env&quot;,
  &quot;default:paths.path[ethtool]&quot;: &quot;/sbin/ethtool&quot;,
  &quot;default:paths.path[find]&quot;: &quot;/usr/bin/find&quot;,
  &quot;default:paths.path[free]&quot;: &quot;/usr/bin/free&quot;,
  &quot;default:paths.path[getent]&quot;: &quot;/usr/bin/getent&quot;,
  &quot;default:paths.path[getfacl]&quot;: &quot;/usr/bin/getfacl&quot;,
  &quot;default:paths.path[git]&quot;: &quot;/usr/bin/git&quot;,
  &quot;default:paths.path[grep]&quot;: &quot;/bin/grep&quot;,
  &quot;default:paths.path[groupadd]&quot;: &quot;/usr/sbin/groupadd&quot;,
  &quot;default:paths.path[groupdel]&quot;: &quot;/usr/sbin/groupdel&quot;,
  &quot;default:paths.path[groupmod]&quot;: &quot;/usr/sbin/groupmod&quot;,
  &quot;default:paths.path[hostname]&quot;: &quot;/bin/hostname&quot;,
  &quot;default:paths.path[ifconfig]&quot;: &quot;/sbin/ifconfig&quot;,
  &quot;default:paths.path[init]&quot;: &quot;/sbin/init&quot;,
  &quot;default:paths.path[ip]&quot;: &quot;/sbin/ip&quot;,
  &quot;default:paths.path[iptables]&quot;: &quot;/sbin/iptables&quot;,
  &quot;default:paths.path[iptables_save]&quot;: &quot;/sbin/iptables-save&quot;,
  &quot;default:paths.path[logger]&quot;: &quot;/usr/bin/logger&quot;,
  &quot;default:paths.path[ls]&quot;: &quot;/bin/ls&quot;,
  &quot;default:paths.path[lsattr]&quot;: &quot;/usr/bin/lsattr&quot;,
  &quot;default:paths.path[lsof]&quot;: &quot;/usr/bin/lsof&quot;,
  &quot;default:paths.path[mailx]&quot;: &quot;/usr/bin/mailx&quot;,
  &quot;default:paths.path[netstat]&quot;: &quot;/bin/netstat&quot;,
  &quot;default:paths.path[nologin]&quot;: &quot;/usr/sbin/nologin&quot;,
  &quot;default:paths.path[npm]&quot;: &quot;/usr/bin/npm&quot;,
  &quot;default:paths.path[perl]&quot;: &quot;/usr/bin/perl&quot;,
  &quot;default:paths.path[pgrep]&quot;: &quot;/usr/bin/pgrep&quot;,
  &quot;default:paths.path[ping]&quot;: &quot;/bin/ping&quot;,
  &quot;default:paths.path[pip]&quot;: &quot;/usr/bin/pip&quot;,
  &quot;default:paths.path[printf]&quot;: &quot;/usr/bin/printf&quot;,
  &quot;default:paths.path[realpath]&quot;: &quot;/usr/bin/realpath&quot;,
  &quot;default:paths.path[sed]&quot;: &quot;/bin/sed&quot;,
  &quot;default:paths.path[service]&quot;: &quot;/usr/sbin/service&quot;,
  &quot;default:paths.path[shadow]&quot;: &quot;/etc/shadow&quot;,
  &quot;default:paths.path[sort]&quot;: &quot;/usr/bin/sort&quot;,
  &quot;default:paths.path[svc]&quot;: &quot;/usr/sbin/service&quot;,
  &quot;default:paths.path[sysctl]&quot;: &quot;/sbin/sysctl&quot;,
  &quot;default:paths.path[systemctl]&quot;: &quot;/bin/systemctl&quot;,
  &quot;default:paths.path[tar]&quot;: &quot;/bin/tar&quot;,
  &quot;default:paths.path[test]&quot;: &quot;/usr/bin/test&quot;,
  &quot;default:paths.path[tr]&quot;: &quot;/usr/bin/tr&quot;,
  &quot;default:paths.path[update_alternatives]&quot;: &quot;/usr/bin/update-alternatives&quot;,
  &quot;default:paths.path[update_rc_d]&quot;: &quot;/usr/sbin/update-rc.d&quot;,
  &quot;default:paths.path[useradd]&quot;: &quot;/usr/sbin/useradd&quot;,
  &quot;default:paths.path[userdel]&quot;: &quot;/usr/sbin/userdel&quot;,
  &quot;default:paths.path[usermod]&quot;: &quot;/usr/sbin/usermod&quot;,
  &quot;default:paths.path[virtualenv]&quot;: &quot;/usr/bin/virtualenv&quot;,
  &quot;default:paths.path[wc]&quot;: &quot;/usr/bin/wc&quot;,
  &quot;default:paths.path[wget]&quot;: &quot;/usr/bin/wget&quot;,
  &quot;default:paths.perl&quot;: &quot;/usr/bin/perl&quot;,
  &quot;default:paths.pgrep&quot;: &quot;/usr/bin/pgrep&quot;,
  &quot;default:paths.ping&quot;: &quot;/bin/ping&quot;,
  &quot;default:paths.pip&quot;: &quot;/usr/bin/pip&quot;,
  &quot;default:paths.printf&quot;: &quot;/usr/bin/printf&quot;,
  &quot;default:paths.realpath&quot;: &quot;/usr/bin/realpath&quot;,
  &quot;default:paths.sed&quot;: &quot;/bin/sed&quot;,
  &quot;default:paths.service&quot;: &quot;/usr/sbin/service&quot;,
  &quot;default:paths.shadow&quot;: &quot;/etc/shadow&quot;,
  &quot;default:paths.sort&quot;: &quot;/usr/bin/sort&quot;,
  &quot;default:paths.svc&quot;: &quot;/usr/sbin/service&quot;,
  &quot;default:paths.sysctl&quot;: &quot;/sbin/sysctl&quot;,
  &quot;default:paths.systemctl&quot;: &quot;/bin/systemctl&quot;,
  &quot;default:paths.tar&quot;: &quot;/bin/tar&quot;,
  &quot;default:paths.test&quot;: &quot;/usr/bin/test&quot;,
  &quot;default:paths.tr&quot;: &quot;/usr/bin/tr&quot;,
  &quot;default:paths.update_alternatives&quot;: &quot;/usr/bin/update-alternatives&quot;,
  &quot;default:paths.update_rc_d&quot;: &quot;/usr/sbin/update-rc.d&quot;,
  &quot;default:paths.useradd&quot;: &quot;/usr/sbin/useradd&quot;,
  &quot;default:paths.userdel&quot;: &quot;/usr/sbin/userdel&quot;,
  &quot;default:paths.usermod&quot;: &quot;/usr/sbin/usermod&quot;,
  &quot;default:paths.virtualenv&quot;: &quot;/usr/bin/virtualenv&quot;,
  &quot;default:paths.wc&quot;: &quot;/usr/bin/wc&quot;,
  &quot;default:paths.wget&quot;: &quot;/usr/bin/wget&quot;
}
</code></pre>

<p>Try finding and merging variables by tag, rendering <a href="https://docs.cfengine.com/docs/3.12/reference-functions-datastate.html" title="datastate()">datastate()</a>, or <a href="https://docs.cfengine.com/docs/3.12/reference-functions-bundlestate.html" title="bundlestate()">bundlestate()</a>.</p>

            </div>
            
            <div class="post-comments">
                
            </div>
            
            <div class="push"></div>
        </div>
        <footer class="footer text-center">
<p>Copyright &copy; 2019 Nick Anderson -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

    </body>
