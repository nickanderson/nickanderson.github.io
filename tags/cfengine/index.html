<!DOCTYPE html>
<html lang="">

	<head>
		<title> Cfengine &middot;  </title>

		<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.54.0" />


<script   src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">


<link rel="stylesheet" href="https://cmdln.org/css/nix.css">
<link rel="stylesheet" href="https://cmdln.org/css/syntax.css">


<link href="https://fonts.googleapis.com/css?family=Inconsolata|Open+Sans|Roboto|Montserrat|Concert+One" rel="stylesheet">




	</head>

	<body>
		<header>
<nav class="navbar navbar-default navbar-fixed-top navbar-inverse font-header">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" id="green-terminal" href=https://cmdln.org>nick@cmdln.org ~ $</a>
		</div>

		
		<div class="collapse navbar-collapse" id="navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>
					<a href="https://cmdln.org">/home/nick</a>
				</li>
				
				
				<li >
					<a href="/post/">~/posts</a>
				</li>
				

			</ul>
		</div>
	</div>
</nav>
</header>

		<div class="container wrapper">
			<div class="row">
				<div class="col-xs-12 text-center">
					<h1 id=>Cfengine</h1>
				</div>
			</div>
			<ul id="post-list">
                	
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/11/21/ensure-all-files-in-roots-path-are-only-writeable-by-root/">Ensure all files in roots PATH are only writeable by root</a></h4>
							<h4 class="post-date">Nov 21, 2018</h4>
						</div>
						<div class="post-summary"><p>How can I ensure that only root has write access to the files and directories  (including symbolic links) in its $PATH?  We could get roots path and then promise that each path recursively has files that are owned by root and that those files are only writeable by root, not writeable by group and not writeable by others. In this example warning vs fixed is implemented for easy switching by the value of a variable.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/11/21/ensure-all-files-in-roots-path-are-only-writeable-by-root/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/11/16/the-top-mustache-extension-in-cfengine-3/">The -top- mustache extension in CFEngine 3</a></h4>
							<h4 class="post-date">Nov 16, 2018</h4>
						</div>
						<div class="post-summary"><p>What is the -top- extension, and how do I use it in CFEngines Mustache templating method?  The -top- extension to the mustache template method, first introduced in CFEngine 3.9.0, is a special key representing the complete data given to the templating engine. This is useful for iterating over the top level of a container {{#-top-}} ... {{/-top-}} and rendering json representation of data given with $ and %.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/11/16/the-top-mustache-extension-in-cfengine-3/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/11/13/hacking-custom-variables-for-additional-augments-in-cfengine/">Hacking custom variables for additional augments in CFEngine</a></h4>
							<h4 class="post-date">Nov 13, 2018</h4>
						</div>
						<div class="post-summary"><p>CFEngine 3.12.0 introduced the augments key to the Augments file format. If you are not already familiar with Augments, check it out. It's a very easy way to define classes and variables very early during agent execution, before policy.
The new augments key allows you to merge additional data in the augments format on top of the base augments. I However, there is, I think, still a simple way to accomplish this.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/11/13/hacking-custom-variables-for-additional-augments-in-cfengine/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/11/10/looking-at-three-high-level-patterns-in-cfengine-3/">Looking at three high level patterns in CFEngine 3</a></h4>
							<h4 class="post-date">Nov 10, 2018</h4>
						</div>
						<div class="post-summary"><p>How do you deal with config files that need different settings based on various services that are running on a host and cooperate with other teams? It's a common question, and it came up on in #cfengine on irc.freenode.net recently.
  The issue is that team A might be working on package A, which requires some  environment variables set. But team B might be working on a totally different  thing -- and want to achieve the same thing.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/11/10/looking-at-three-high-level-patterns-in-cfengine-3/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/05/25/automatically-remediate-corruption-in-lmdb-with-cfengine-3/">Automatically remediate corruption in lmdb with cfengine 3</a></h4>
							<h4 class="post-date">May 25, 2018</h4>
						</div>
						<div class="post-summary"><p>How can I automatically remediate the issue where corruption in LMDB causes the agent to crash?
In some cases lmdb corruption causes cf-agent to crash. The typical fix is to remove the corrupt lmdbs causing the problem. In some cases this can be remediated from policy. This policy (run early in the bundlesequence) uses lmdump to probe all lmdbs. If the probe fails the offending lmdb and it's associated lock files are deleted.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/05/25/automatically-remediate-corruption-in-lmdb-with-cfengine-3/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/05/24/what-is-evaluated-first-in-cfengine-3-vars-or-classes/">What is evaluated first in cfengine 3? vars or classes</a></h4>
							<h4 class="post-date">May 24, 2018</h4>
						</div>
						<div class="post-summary"><p>How do I know if vars or classes come first during cfengine evaluation?
Read the documentation on Normal Order There is a wealth of information on docs.cfengine.com. Find documentation about the order of agent promise evaluation (Normal Order) in the Language Concepts section of the Reference manual.
Run the agent with --verbose or -v and grep for pass 1. Write a test policy that has both vars and classes promises.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/05/24/what-is-evaluated-first-in-cfengine-3-vars-or-classes/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/05/23/how-to-enforce-legalese-on-windows-login-with-cfengine-3/">How to enforce legalese on windows login with cfengine 3</a></h4>
							<h4 class="post-date">May 23, 2018</h4>
						</div>
						<div class="post-summary"><p>How can I ensure that a notice containing legal text is presented to windows users during login?
With the windows agent (Northern.tech builds Enterprise windows agents) you can accomplish this by managing the registry using the databases promise type.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  bundle agent registered_owner #@ brief Make the laywers happy by showing their notice to windows users on login  { meta: windows:: &#34;tags&#34; slist =&gt; { &#34;autorun&#34; }; &#34;description&#34; string =&gt; &#34;Ensure the proper leagal notice is displayed to users when they log on.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/05/23/how-to-enforce-legalese-on-windows-login-with-cfengine-3/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/01/29/purging-packages-with-the-cfengine-3-apt_get-package-module/">Purging packages with the cfengine 3 apt_get package module</a></h4>
							<h4 class="post-date">Jan 29, 2018</h4>
						</div>
						<div class="post-summary"><p>How can I purge a package using the apt_get package_module? policy =&gt; purge doesn't work.  present and absent are the package states, purge is an option for package manager. You should be able to use the options attribute since the =apt_get= package module supports it.
1 2 3 4 5 6 7 8 9 10  bundle agent main { packages: # Purging a package using the --purge option  &#34;screen&#34; policy =&gt; &#34;absent&#34;, package_module =&gt; apt_get, options =&gt; { &#34;--remove&#34; }; }    Note that you can use any Configuration Item as well:</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/01/29/purging-packages-with-the-cfengine-3-apt_get-package-module/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/01/28/timeboxing-policy-in-cfengine3/">Timeboxing Policy in Cfengine3</a></h4>
							<h4 class="post-date">Jan 28, 2018</h4>
						</div>
						<div class="post-summary"><p>How can I make cfengine do things during a specific time window?  You can find "time based classes" in the cf-promises --show-classes output, they are easily identified because they are tagged with time_based. For example:
1  cf-promises --show-classes | grep time   | Day2 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Afternoon time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Day2 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Hr14 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Hr14_Q1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Lcycle_1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_March time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Min10 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Min10_15 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Q1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Thursday time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | GMT_Yr2017 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Hr08 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Hr08_Q1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Hr8 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Lcycle_1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | March time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Min10 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Min10_15 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Morning time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Q1 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Thursday time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass | | Yr2017 time_based | cfengine_internal_time_based_autoremove | source=agent | hardclass |  You can guard your promise with a time based class expression so that it can only execute during the 7:00 hour.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/01/28/timeboxing-policy-in-cfengine3/">Read More</a>
						</div>
					</div>
				</li>
			
				<li>
					<div class="post-list-item">
						<div class="post-header">
							<h4 class="post-link"><a href="https://cmdln.org/2018/01/27/formatting-time-in-cfengine3/">Formatting Time in CFEngine3</a></h4>
							<h4 class="post-date">Jan 27, 2018</h4>
						</div>
						<div class="post-summary"><p>How do I format and convert time strings?  The strftime() function takes unix epoch format as input and can format the time using the standard strftime templates.
1 2 3 4 5 6 7  bundle agent main { reports: &#34;$(with)&#34; with =&gt; strftime( localtime, &#34;%FT%R:%S%Z&#34;, now() ); }  R: 2018-01-27T15:47:14CST  Unfortunately there is currently no native way to convert from other inputs formats. You can however, use an external command.</p></div>
						<div class="post-list-footer text-center">
							<a href="https://cmdln.org/2018/01/27/formatting-time-in-cfengine3/">Read More</a>
						</div>
					</div>
				</li>
			
			</ul>
            

<div class="pagination-wrapper text-center">
  <ul class="pagination">
      
      <li>
          <a href="/tags/cfengine/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      
      <li
      class="disabled">
          <a href="" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
      </li>
      
      <li
      class="active"><a href="/tags/cfengine/">1</a></li>
      
      <li
      ><a href="/tags/cfengine/page/2/">2</a></li>
      
      <li
      ><a href="/tags/cfengine/page/3/">3</a></li>
      
      <li
      ><a href="/tags/cfengine/page/4/">4</a></li>
      
      <li
      >
          <a href="/tags/cfengine/page/2/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
      </li>
      
      <li>
          <a href="/tags/cfengine/page/4/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
      
    </ul>
</div>



			<div class="push"></div>
		</div>
		<footer class="footer text-center">
<p>Copyright &copy; 2019 Nick Anderson -
<span class="credit">
	Powered by
	<a target="_blank" href="https://gohugo.io">Hugo</a>
	and
	<a target="_blank" href="https://github.com/LordMathis/hugo-theme-nix/">Nix</a> theme.
</span>
</p>
</footer>

	</body>
</html>
